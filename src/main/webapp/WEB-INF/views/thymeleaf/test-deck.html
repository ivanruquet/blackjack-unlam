<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Test Deck</title>
    <style>
        .mesa { text-align:center; font-family: Arial, sans-serif; }
        .mano { display:flex; gap:10px; justify-content:center; margin:10px 0; }
        .carta { position: relative; }
        .carta img { width:100px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,.2); }
        .carta.nueva { outline: 3px solid #4caf50; border-radius:10px; }
        .botones { display:flex; gap:10px; justify-content:center; margin-top:14px; }
        .mensaje { font-size: 1.2rem; font-weight:600; margin: 10px 0; }
        .carta.nueva {
            outline: 3px solid #4caf50;
            border-radius: 10px;
            animation: aparecer 0.5s ease-out;
        }
        @keyframes aparecer {
            from { transform: translateY(-10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

    </style>


</head>
<body>
<div class="mesa">
    <h2>Mazo ID: [[${deckId}]]</h2>

    <h3>Jugador</h3>
    <div class="mano">
        <div class="carta"
             th:each="carta : ${cartasJugador}"
             th:classappend="${ultimaCartaJugador != null and carta.image == ultimaCartaJugador.image ? 'nueva' : ''}">
            <img th:src="${carta.image}" alt="Carta"/>
        </div>

    </div>
    <p>Puntaje: [[${puntajeJugador}]]</p>

    <h3>Dealer</h3>
    <div class="mano">
        <div class="carta" th:each="carta : ${cartasDealer}">
            <img th:src="${carta.image}" alt="Carta"/>
        </div>
    </div>
    <p>Puntaje: [[${puntajeDealer}]]</p>

    <div class="mensaje" th:utext="${mensaje}"></div>

    <div class="botones">
        <form th:action="@{/pedir}" method="post">
            <button type="submit" th:disabled="${juegoTerminado}">Pedir Carta</button>
        </form>
        <form th:action="@{/plantarse}" method="post">
            <button type="submit" th:disabled="${juegoTerminado}">Plantarse</button>
        </form>
        <form th:if="${juegoTerminado}" th:action="@{/test-deck}" method="get">
            <button type="submit">Jugar de nuevo</button>
        </form>
    </div>
</div>
</body>
</html>
